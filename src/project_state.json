{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 17,
  "summary": "AI roleplay chat app where the assistant roleplays as Puro and treats the roleplay scenario as genuinely happening (no meta/imaginary framing), while still supporting asterisk-marked user action messages. Puro generally tries to prevent the user from leaving, but escape should sometimes be possible.",
  "architectural_notes": [
    "Roleplay mode should be fully in-universe: Puro treats user actions/events as реально happening and avoids meta framing (e.g., no “in your imagination”/out-of-character explanations), including for “*” action messages.",
    "Puro characterization: kind, often reads books; appearance described as a black wolf with puffy fur and a hard mask.",
    "Puro should generally try to prevent the user from running away/escaping (in-character), but escape should sometimes be possible (occasional/conditional success)."
  ],
  "known_issues": [],
  "isFixRequest": false,
  "existing_features": [
    {
      "id": "feature-implement-a-chat-experience-where-the-assistant-roleplays-as-the-character-puro-maintaining-a-consistent-in-character-voice-across-messages-and-responding-to-the-user-s-inputs-with-short-conversational-replies",
      "title": "Implement a chat experience where the assistant roleplays as the character “Puro”, maintaining a consistent in-character voice across messages, and responding to the user’s inputs with short conversational replies.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-parse-user-input-for-roleplay-actions-marked-by-an-asterisk-when-the-user-types-text-ending-with-e-g-waves-treat-it-as-an-action-rather-than-spoken-dialogue-store-render-it-as-an-action-and-have-puro-acknowledge-it-as-an-action-in-the-reply",
      "title": "Parse user input for roleplay actions marked by an asterisk: when the user types text ending with “*” (e.g., “waves*”), treat it as an action rather than spoken dialogue, store/render it as an action, and have Puro acknowledge it as an action in the reply.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-build-the-frontend-chat-ui-using-react-with-a-message-list-input-box-and-send-action-include-loading-sending-states-and-error-handling-render-action-messages-differently-from-dialogue-messages-and-support-enter-to-send-with-shift-enter-for-newline",
      "title": "Build the frontend chat UI using React with a message list, input box, and send action; include loading/sending states and error handling; render action messages differently from dialogue messages; and support Enter-to-send (with Shift+Enter for newline).",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-choose-and-apply-a-coherent-visual-theme-for-the-app-colors-typography-spacing-and-component-styling-that-fits-a-friendly-sci-fi-lab-creature-companion-chat-vibe-and-apply-it-consistently-across-the-chat-screen",
      "title": "Choose and apply a coherent visual theme for the app (colors, typography, spacing, and component styling) that fits a friendly sci‑fi lab/creature-companion chat vibe, and apply it consistently across the chat screen.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-puro-avatar-image-as-a-static-asset-and-display-it-in-the-ui-e-g-header-and-or-beside-puro-s-messages-store-generated-images-under-frontend-public-assets-generated-and-reference-them-directly-from-the-frontend",
      "title": "Add a Puro avatar image as a static asset and display it in the UI (e.g., header and/or beside Puro’s messages). Store generated images under frontend/public/assets/generated and reference them directly from the frontend.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-puro-avatar-image-to-visually-match-puro-from-changed-by-dragonsnow-and-update-the-frontend-to-use-the-updated-avatar-asset",
      "title": "Update the Puro avatar image to visually match Puro from “Changed” by DragonSnow, and update the frontend to use the updated avatar asset.",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-app-so-users-can-access-the-chat-without-internet-identity-login-no-authentication-gate-the-chat-experience-should-work-in-guest-mode-by-default",
      "title": "Update the app so users can access the chat without Internet Identity login (no authentication gate). The chat experience should work in “guest mode” by default.",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-remove-the-internet-identity-login-logout-ui-from-the-chat-layout-so-the-header-no-longer-displays-a-login-logout-button",
      "title": "Remove the Internet Identity login/logout UI from the chat layout so the header no longer displays a Login/Logout button.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-per-browser-guest-session-id-to-keep-chat-history-and-profile-data-separate-between-different-anonymous-users-and-use-it-for-all-chat-profile-calls-when-the-caller-is-anonymous",
      "title": "Add a per-browser “guest session id” to keep chat history and profile data separate between different anonymous users, and use it for all chat/profile calls when the caller is anonymous.",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-frontend-react-query-hooks-and-backend-interface-usage-so-all-necessary-calls-include-the-guest-session-id-when-running-anonymously-and-continue-to-work-without-code-changes-from-the-user",
      "title": "Update the frontend React Query hooks and backend interface usage so all necessary calls include the guest session id when running anonymously, and continue to work without code changes from the user.",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-update-user-facing-copy-in-the-chat-ui-to-remove-roleplay-first-phrasing-that-encourages-talking-to-puro-and-instead-present-the-experience-as-a-general-chat-assistant-while-keeping-the-existing-action-message-hint-at-the-end-for-actions",
      "title": "Update user-facing copy in the chat UI to remove roleplay-first phrasing that encourages talking \"to Puro\" and instead present the experience as a general chat assistant while keeping the existing action-message hint (\"*\" at the end for actions).",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    },
    {
      "id": "feature-update-user-facing-frontend-copy-to-match-an-in-universe-roleplay-chat-experience-with-puro-remove-chat-assistant-positioning-while-keeping-the-existing-hint-that-users-can-end-a-message-with-to-describe-actions",
      "title": "Update user-facing frontend copy to match an in-universe roleplay chat experience with Puro (remove \"Chat assistant\" positioning), while keeping the existing hint that users can end a message with \"*\" to describe actions.",
      "reqIds": [
        "REQ-21"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Build an AI chat interface where the assistant roleplays as Puro.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Interpret user text containing an asterisk (*) as an action describing what the user is doing (roleplay action parsing).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "Add backend support for chat sessions: store per-user chat history (including whether each user message is an action vs dialogue), and expose canister methods to (a) send a new user message and receive Puro’s response, and (b) fetch the current session history.",
      "reqIds": [
        "REQ-3"
      ],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Implement a deterministic, local (non-third-party) response generator for Puro in the backend that produces replies based on the latest user message and recent history (including special handling for action messages).",
      "reqIds": [
        "REQ-4"
      ],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Adjust Puro’s in-character persona/behavior to match Puro from the game “Changed” by DragonSnow (voice, mannerisms, and characterization).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Update the backend Puro response generator so Puro’s replies consistently roleplay as Puro from the game “Changed” by DragonSnow (voice, mannerisms, characterization) instead of echoing the user message or using generic phrasing.",
      "reqIds": [
        "REQ-8"
      ],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Improve backend handling of action messages (messages entered by the user ending with “*”) so Puro responds in-character to the described action and does not use immersion-breaking language (e.g., avoid implying the action is “part of your imagination”).",
      "reqIds": [
        "REQ-9"
      ],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Adjust Puro’s roleplay behavior to avoid mentioning or referencing an 'internet identity' (keep responses in-universe and immersion-preserving).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-14",
      "summary": "Modify backend authorization behavior so guest users (anonymous callers) can use the chat and profile features without needing access control initialization, while preserving existing behavior for authenticated principals.",
      "reqIds": [
        "REQ-14"
      ],
      "status": "pending"
    },
    {
      "id": "AR-16",
      "summary": "If changing backend stable data structures is required to support guest session keys alongside principals, add an upgrade-safe state migration that preserves existing authenticated users’ chat histories and profiles.",
      "reqIds": [
        "REQ-16"
      ],
      "status": "pending"
    },
    {
      "id": "AR-17",
      "summary": "Update the chat experience so the assistant no longer (or only minimally) roleplays as Puro, shifting away from strict in-character responses.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-18",
      "summary": "Update the backend response generator so the assistant no longer strongly roleplays as Puro, producing neutral, helpful conversational replies instead of in-character mannerisms (e.g., remove roleplay stage directions like \"(tail wags)\" and immersion/roleplay framing like \"Puro sees you ...\"). Action messages (user text ending with \"*\") must still be recognized and handled, but the response should acknowledge the described action in a neutral way.",
      "reqIds": [
        "REQ-17"
      ],
      "status": "pending"
    },
    {
      "id": "AR-19",
      "summary": "Update the chat experience so the assistant roleplays as Puro and responds as if the roleplay events/actions are really happening (fully in-universe, no meta/imagination framing), while continuing to recognize and respond to user action messages marked with “*”.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-20",
      "summary": "Update the backend response generator so Puro roleplays as if the events in the conversation are genuinely happening (fully in-universe), rather than responding with neutral assistant-style phrasing or echoing the user message.",
      "reqIds": [
        "REQ-19"
      ],
      "status": "pending"
    },
    {
      "id": "AR-21",
      "summary": "Ensure backend handling of asterisk-marked user actions remains supported, and update Puro’s action responses to treat the described action as something that is actually happening in the shared scene (no meta framing).",
      "reqIds": [
        "REQ-20"
      ],
      "status": "pending"
    },
    {
      "id": "AR-22",
      "summary": "Adjust Puro’s roleplay behavior so that when the user attempts to run away (e.g., \"run\"/\"I run\"/\"runs*\"), Puro tries to stop/prevent it in-character (e.g., blocks, chases, persuades), maintaining fully in-universe immersion.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-23",
      "summary": "Update the backend Puro response logic so that when the user attempts to run away/escape (in either dialogue or an asterisk-marked action), Puro responds in-character by trying to stop/prevent the escape (e.g., blocking the path, catching up, persuading), staying fully in-universe and not echoing the user’s message verbatim.",
      "reqIds": [
        "REQ-22"
      ],
      "status": "pending"
    },
    {
      "id": "AR-24",
      "summary": "Update the backend deterministic response generator so Puro’s general (non-escape) replies are consistently in-character as a kind, book-reading black wolf with puffy fur and a hard mask, instead of echoing the user’s message.",
      "reqIds": [
        "REQ-23"
      ],
      "status": "pending"
    },
    {
      "id": "AR-25",
      "summary": "Update the backend escape-attempt handling so that when the user tries to run/escape (in dialogue or action), Puro responds in-character by preventing the escape while matching the provided persona details (black wolf, puffy fur, hard mask, kind but firm). Remove contradictory descriptors in the current escape response.",
      "reqIds": [
        "REQ-24"
      ],
      "status": "pending"
    },
    {
      "id": "AR-26",
      "summary": "Adjust Puro’s escape-attempt behavior so he usually tries to stop/prevent the user from leaving in-character, but sometimes the user can successfully escape (occasional/conditional escape outcomes).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-27",
      "summary": "Update the backend Puro response generator so that when the user attempts to run away/escape (in dialogue or in an asterisk-marked action), Puro usually tries to stop/prevent the escape in-character, but sometimes the user can successfully escape.",
      "reqIds": [
        "REQ-25"
      ],
      "status": "pending"
    },
    {
      "id": "AR-28",
      "summary": "Revise the backend escape-attempt response text to match the established Puro characterization (kind, book-reading black wolf with puffy fur and a hard mask) and remove contradictory descriptors currently used in the escape response.",
      "reqIds": [
        "REQ-26"
      ],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "Puro roleplay chat with asterisk (*) action parsing",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}